

<!doctype html>
<html lang="en" class="no-js">
  <head>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-3852793730107162",
        enable_page_level_ads: true
      });
    </script>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Machine Learning Part 4: Setting Up Python Environment for Computer Vision and Machine Learning - Mahaveer Senior Deep Learning Engineer</title>







<meta property="og:locale" content="en">
<meta property="og:site_name" content="Mahaveer Senior Deep Learning Engineer">
<meta property="og:title" content="Machine Learning Part 4: Setting Up Python Environment for Computer Vision and Machine Learning">


  <link rel="canonical" href="http://localhost:4000/mahaveer0suthar.github.io/tutorial/Setting-Up-Python-Environment-For-Computer-Vision-And-Machine-Learning/">
  <meta property="og:url" content="http://localhost:4000/mahaveer0suthar.github.io/tutorial/Setting-Up-Python-Environment-For-Computer-Vision-And-Machine-Learning/">



  <meta property="og:description" content="So, I am here with you again, in the new post of Machine Learning tutorial series. Next time, I told you about Linear Regression and promised to talk further more in the next post. And I am also gonna ask you to do some coding, remember? But before doing that, we need more than our hands. If you are gonna have a show, then you must have the stage prepared, right? Similarly, if you want to write some lines of code, then you need to prepare the developing environment. Today, I will show you how to do that.">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2017-10-08T00:00:00+05:30">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Mahaveer Suthar",
      "url" : "http://localhost:4000/mahaveer0suthar.github.io",
      "sameAs" : null
    }
  </script>



  <meta name="google-site-verification" content="ho8trrB9Qh7KHvxD-AUywATdPAOr6EJQ3pQbX6bfZFA" />




<!-- end SEO -->


<link href="http://localhost:4000/mahaveer0suthar.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Mahaveer Senior Deep Learning Engineer Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/mahaveer0suthar.github.io/assets/css/main.css">

<meta http-equiv="cleartype" content="on">


    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--post">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="http://localhost:4000/mahaveer0suthar.github.io/">Mahaveer Senior Deep Learning Engineer</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/mahaveer0suthar.github.io/about/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://mahaveer0suthar.github.io/portfolio/">Projects</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/mahaveer0suthar.github.io/experience/">Professional Experience</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/mahaveer0suthar.github.io/skills/">Skills & Areas of Interests</a></li>
          
            
            <li class="masthead__menu-item"><a href="http://localhost:4000/mahaveer0suthar.github.io/education/">Education</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://mahaveer0suthar.github.io/tutorials/">Tutorials</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    <p>So, I am here with you again, in the new post of Machine Learning tutorial series. Next time, I told you about Linear Regression and promised to talk further more in the next post. And I am also gonna ask you to do some coding, remember? But before doing that, we need more than our hands. If you are gonna have a show, then you must have the stage prepared, right? Similarly, if you want to write some lines of code, then you need to prepare the developing environment. Today, I will show you how to do that.</p>

<p>In this post, I am assuming that you are using a computer running on Linux based OS (like Ubuntu, Red Hat, ect). For ones who are sticking to Windows, I am so sorry. I will write a post for Windows users soon.</p>

<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- MidPageAds -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3852793730107162" data-ad-slot="4068904466" data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p>We will install OpenCV for Computer Vision, and Keras (Theano backend) for Machine Learning. I will make it short and clear, just to make sure that you will have a working environment, without spending so much time on struggling with unknown errors.</p>

<p><strong>1. INSTALL OPENCV</strong></p>

<p>Firstly, open your <em>Terminal</em>, and type the lines below to Update and Upgrade the packages:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get upgrade</code></pre></figure>

<p>From now on, just hit <em>y</em> when prompted. Next, we will install the necessary packages for OpenCV:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential cmake git pkg-config libjpeg8-dev <span class="se">\</span>
libjasper-dev libpng12-dev libgtk2.0-dev <span class="se">\</span>
libavcodec-dev libavformat-dev libswscale-dev libv4l-dev gfortran
<span class="nb">sudo </span>apt-get <span class="nb">install </span>libtiff5-dev </code></pre></figure>

<p>Next, we will need library to optimizing purpose (there will be a lot of simultaneous computation in Computer Vision and Machine Learning which mainly bottleneck the performance). We will use ATLAS (among many other BLAS implementation):</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt-get <span class="nb">install </span>libatlas-base-dev</code></pre></figure>

<p>After that, we will install <em>pip</em>, a tool used for installing Python packages by PyPA:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">wget https://bootstrap.pypa.io/get-pip.py
<span class="nb">sudo </span>python get-pip.py</code></pre></figure>

<p>In the next step, we will need to install <em>virtualenv</em> and <em>virtualenvwrapper</em>, which are tools for isolating Python environments. You may ask why we have to do that. Imagine you are using Python for many purposes (like game developing, computer vision, machine learning, etc). Because each requires different configuration, it will be a good idea to work seperately to avoid confliction.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>pip <span class="nb">install </span>virtualenv virtualenvwrapper</code></pre></figure>

<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- MidPageAds2 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3852793730107162" data-ad-slot="2275566366" data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p>To make <em>virtualenv</em> work, we will have to apply these lines to our <em>~/.bashrc</em> by typing <em>sudo vim ~/.bashrc</em> (I prefer Vim, you can use whatever you want). Then add these lines to the end of the file:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">export </span><span class="nv">WORKON_HOME</span><span class="o">=</span><span class="nv">$HOME</span>/.virtualenvs
<span class="nb">source</span> /usr/local/bin/virtualenvwrapper.sh</code></pre></figure>

<p>Now, let’s create our virtual environment for installing OpenCV</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">source</span> ~/.bashrc
mkvirtualenv opencv</code></pre></figure>

<p>From this step, make sure you are in <em>opencv</em> environment (you can know by seeing if there is <em>(opencv)</em> before the $ mark).</p>

<p>Next we need to install python development tools package:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt-get <span class="nb">install </span>python2.7-dev</code></pre></figure>

<p>Then we will install <em>numpy</em>, a very powerful module for dealing with array computation:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pip <span class="nb">install </span>numpy</code></pre></figure>

<p><strong>Note that you can not add <em>sudo</em> all the time. Because <em>sudo</em> means that you are execute as <em>superuser</em>, it will install directly into your system environment, not the virtual environment!</strong></p>

<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- MidPageAds -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3852793730107162" data-ad-slot="4068904466" data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p>Next, we will download <strong>OpenCV</strong>, then checkout to <em>3.0.0</em> branch:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> ~
git clone https://github.com/Itseez/opencv.git
<span class="nb">cd </span>opencv
git checkout 3.0.0
<span class="nb">cd</span> ~
git clone https://github.com/Itseez/opencv_contrib.git
<span class="nb">cd </span>opencv_contrib
git checkout 3.0.0</code></pre></figure>

<p>Now we got everything ready to be installed, let’s compile and install <strong>OpenCV</strong>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> ~/opencv
<span class="nb">mkdir </span>build
<span class="nb">cd </span>build
cmake <span class="nt">-D</span> <span class="nv">CMAKE_BUILD_TYPE</span><span class="o">=</span>RELEASE <span class="se">\</span>
	<span class="nt">-D</span> <span class="nv">CMAKE_INSTALL_PREFIX</span><span class="o">=</span>/usr/local <span class="se">\</span>
	<span class="nt">-D</span> <span class="nv">INSTALL_C_EXAMPLES</span><span class="o">=</span>ON <span class="se">\</span>
	<span class="nt">-D</span> <span class="nv">INSTALL_PYTHON_EXAMPLES</span><span class="o">=</span>ON <span class="se">\</span>
	<span class="nt">-D</span> <span class="nv">OPENCV_EXTRA_MODULES_PATH</span><span class="o">=</span>~/opencv_contrib/modules <span class="se">\</span>
	<span class="nt">-D</span> <span class="nv">BUILD_EXAMPLES</span><span class="o">=</span>ON ..
  
make
<span class="nb">sudo </span>make <span class="nb">install
sudo </span>ldconfig</code></pre></figure>

<p>In the last step, we only need to link the installed <strong>OpenCV</strong> to our virtual environment:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> ~/.virtualenvs/cv/lib/python2.7/site-packages/
<span class="nb">ln</span> <span class="nt">-s</span> /usr/local/lib/python2.7/site-packages/cv2.so cv2.so</code></pre></figure>

<p>Now let’s test if <strong>OpenCV</strong> was installed successfully (make sure that you are still standing in <em>opencv</em> virtual environment):</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python
<span class="o">&gt;&gt;&gt;</span> import cv2
<span class="o">&gt;&gt;&gt;</span> cv2.__version__
<span class="s1">'3.0.0'</span></code></pre></figure>

<p>If you see the output like above, then Congratulations! You have successfully installed OpenCV!</p>

<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- MidPageAds2 -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3852793730107162" data-ad-slot="2275566366" data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p><strong>2. INSTALL KERAS</strong></p>

<p>Now let’s move on to install Keras. Actually we will almost use the <em>scikit-learn</em> library, not Keras in the near future, but Keras is not so hard to install, so I decided to add it here so that I won’t have to make another post for Keras.</p>

<p>As I mentioned earlier, you may not want to mess up your environments. So let’s create another virtual enviroment for Keras.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Exit the current virtual environment</span>
deactivate
mkvirtualenv keras</code></pre></figure>

<p>Now let’s install necessary packages for Keras:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pip <span class="nb">install </span>numpy scipy scikit-learn pillow h5py</code></pre></figure>

<p>Keras actually works on top of Theano and Tensorflow (if you don’t give a damn about what they are, then that’s just fine!). Suppose that you are using Keras with Theano backend, so you will have to install Theano first:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pip <span class="nb">install</span> <span class="nt">--upgrade</span> <span class="nt">--no-deps</span> git+git://github.com/Theano/Theano.git</code></pre></figure>

<p>Wait until the Theano installation completes, then we can install keras:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pip <span class="nb">install </span>keras</code></pre></figure>

<p>We have just finished our Keras installation. If you want to use OpenCV in <em>keras</em> virtual environment, you can link it the way we did above:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> ~/.virtualenvs/keras/lib/python2.7/site-packages/
<span class="nb">ln</span> <span class="nt">-s</span> /usr/local/lib/python2.7/site-packages/cv2.so cv2.so</code></pre></figure>

<p>Now let’s test our installation. Again, make sure that you are still in <em>keras</em> enviroment.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">python
<span class="o">&gt;&gt;&gt;</span> import keras
Using Theano backend.</code></pre></figure>

<p>If you had the exact output as above, then Congratulations again! Wait… what if you didn’t, but received <em>Using TensorFlow backend</em> error instead. Well, sometimes Keras fails to choose the right backend, and you must do it manually. But don’t worry, it should be just a piece of cake!</p>

<script async="" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<!-- MidPageAds -->
<p><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-3852793730107162" data-ad-slot="4068904466" data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>

<p>All you have to do is modify the file <em>~/.keras/keras.json</em>, replace ‘TensorFlow’ with ‘Theano’, then try to test it again. It should work just fine!</p>

<p>So now you have installed all you need for learning Computer Vision and Machine Learning. Great job guys! It was not as hard as you imagined right?</p>

<p>So now you have swords and shields. We are ready to be on the field. I know you guys don’t want to wait no more. So I will post the next post soon, I promise. Before that, make sure you revise all the stuff about Linear Regression. And I will be back. See you!</p>


    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- New Ads -->
    <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-3852793730107162"
     data-ad-slot="4068904466"
     data-ad-format="auto"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    
    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->

        

<div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
    
    
      <li><a href="http://github.com/mahaveer0suthar"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="http://localhost:4000/mahaveer0suthar.github.io/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Mahaveer Suthar. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="http://localhost:4000/mahaveer0suthar.github.io/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-137799718-1', 'auto');
  ga('send', 'pageview');
</script>






  </body>
</html>
